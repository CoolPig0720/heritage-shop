1、前端界面整体美化
2、用户地址
这是一个**非常好的问题，而且问得非常“到位”**——说明你已经开始从“能用”转向“可扩展、可维护”的系统设计阶段了。

我直接给你结论：

> **地址绝对不应该继续往用户表里加字段，而应该单独设计“用户地址表”，并与用户表建立一对多关系。**

下面我从**设计原则 → 表结构推荐 → 业务扩展 → 常见误区**四个层面，给你一套**课程设计 / 实战都完全合格**的方案。

---

## 一、设计原则（你现在这个阶段必须遵守的）

### 1️⃣ 一张表只做一件事（单一职责）

你的 `user` 表现在职责是：

* 认证（account / password）
* 身份（role / certificate_number）
* 基本展示（name / avatar）

**地址属于“可重复的业务数据”，不是用户的固有属性。**

---

### 2️⃣ 一个用户 ≠ 一个地址

现实业务中至少有：

* 收货地址
* 默认地址
* 历史地址
* 商家地址（如果是 MERCHANT）

👉 **天然是一对多**

---

### 3️⃣ 可扩展性优先于“图省事”

如果你现在把地址字段塞进 `user`：

* 第 2 个地址怎么办？
* 默认地址怎么标？
* 删除 / 逻辑失效怎么处理？

**后期一定重构，作业也会被扣分。**

---

## 二、推荐的地址表设计（标准答案级）

### ✅ 表名建议

```sql
user_address
```

或（更规范）：

```sql
t_user_address
```

---

### ✅ 表结构推荐（直接可用）

| 字段名            | 类型           | 说明           |
| -------------- | ------------ | ------------ |
| id             | BIGINT PK    | 地址ID         |
| user_id        | BIGINT       | 所属用户ID       |
| receiver_name  | VARCHAR(50)  | 收货人姓名        |
| receiver_phone | VARCHAR(20)  | 收货人手机号       |
| province       | VARCHAR(50)  | 省            |
| city           | VARCHAR(50)  | 市            |
| district       | VARCHAR(50)  | 区            |
| detail_address | VARCHAR(255) | 详细地址         |
| is_default     | TINYINT(1)   | 是否默认地址       |
| status         | TINYINT(1)   | 状态：1-有效，0-删除 |
| create_time    | DATETIME     | 创建时间         |
| update_time    | DATETIME     | 更新时间         |

---

### ✅ 关键索引设计（非常重要）

```sql
PRIMARY KEY (id)
KEY idx_user_id (user_id)
KEY idx_user_default (user_id, is_default)
```

❗ **不要**给 `detail_address` 建索引
❗ **不要**把地址拆太细（省市区用字符串即可，除非你要做行政区表）

---

## 三、和用户表的关系说明（这是老师最爱问的）

### 📌 数据库层面

* **逻辑关系**：一对多
* **物理关系**：`user_address.user_id → user.id`

是否加外键？

> **不强制加外键（推荐不加）**

原因：

* 你是业务系统，不是纯教学 SQL
* Spring Boot 项目中，外键带来的级联删除风险大于收益

---

## 四、业务层面的设计建议（提前给你“加分点”）

### 1️⃣ 默认地址如何保证只有一个？

**不靠数据库约束，而靠业务逻辑**

示例逻辑：

```text
设置某地址为默认 →
先把该用户所有地址 is_default = 0 →
再把当前地址 is_default = 1
```

---

### 2️⃣ 删除地址，千万不要物理删除

```sql
UPDATE user_address
SET status = 0
WHERE id = ?
```

这样你可以：

* 防止误删
* 保留历史订单地址

---

### 3️⃣ 地址和订单如何解耦（提前告诉你）

> **订单表不要直接关联 user_address 表**

订单中应冗余：

* 收货人姓名
* 电话
* 完整地址字符串

这是**成熟系统设计**，不是浪费字段。

---

## 五、Controller / API 设计建议（顺手给你一套）

```text
POST   /api/user/address        新增地址
PUT    /api/user/address/{id}   修改地址
DELETE /api/user/address/{id}   删除地址（逻辑删除）
GET    /api/user/address/list   查询当前用户地址
PUT    /api/user/address/{id}/default 设为默认
```

全部：

* **必须登录**
* **user_id 从 JWT 中取，禁止前端传**

---

## 六、你这个用户表本身设计得怎么样？

实话实说一句（专业角度）：

> **你这个 user 表设计已经达到了“课程设计 + 初级真实项目”的优秀水平**

特别是：

* role 枚举合理
* certificate_number 可空 + 唯一索引
* avatar 只存 URL（非常正确）

---

## 七、总结一句“设计结论”

> **地址 = 用户的“可变、可重复业务数据”
> 必须独立成表，与 user 表一对多关联
> 永远不要为了省事破坏表的职责边界**

---

## 八、如果你愿意，我可以继续帮你：

* 直接给你 **`user_address` 的建表 SQL**
* 顺着你的 JWT，帮你设计 **“当前登录用户地址模块”完整代码结构**
* 顺带帮你把 **订单地址设计** 一次性讲清楚，避免你后面返工

你可以告诉我：
👉 这是**课程设计 / 毕业设计 / 实际项目**哪一种？我可以按标准帮你继续往下“定型”。
